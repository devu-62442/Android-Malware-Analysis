# Android Malware Analysis

## Android Malware detection through Network Traffic Analysis
Android is a Linux based operating system it is designed primarily for touch screen mobile devices such as smartphones and tablet computers. The operating system have developed a lot in last 15 years starting from black and white phones to recent smartphones or mini computers. One of the most widely used mobile OS these days is android. The android is software that was founded in Palo Alto of California in 2003. Android has been the best-selling OS worldwide on smartphones since 2011 and on tablets since 2013. As of May 2017, it has over 2 billion monthly active users, the largest installed base of any operating system, and as of December 2018, the Google Play store features over 2.6 million apps.

Growing popularity of Android mobile operating system has not only attracted user community but also the malware developers towards this platform. Large number of malicious apps have been detected in the past years in Google Play Store and third party app markets.

## Getting Started

Many detection techniques have been proposed in the for Android malware detection :

    - Based on Permissions  
    - Based on System Calls  
    - Signature Based.

We used a detection technique based on network traffic analysis. We compare network traffic of malwares with that of benign apps and find the features which distinguish both types of traffic. Based upon these features we build a decision tree classifier to detect benign and malicious apps from the testing dataset. Network traffic analysis main objective is to :

    -: Analyse the traffic flowing across the network. 

    -: Analysis the traffic to detect the unwanted traffic being used by a particular application.

    -: Network traffic analysis to catch the Behavioral Patterns for Spotting Suspicious Activities

    -: Analysis of traffic to minimise damages caused by the malicious applications (or apps) 

### There are many reasons why network traffic analysis is good for detection of android malware some of them are :

   &#x1F538; - Network Traffic Analysis gives you in-depth application monitoring and bandwidth utilisation capabilities.           
   
   &#x1F538; - With network traffic analysis for netflow, you can produce reports that show use of unwanted traffic.
   
   &#x1F538; - Network Traffic Analysis gives you a ready tool for a quick deep dive into the underlying causes of network slowdowns.
   
   &#x1F538; - Pattern can be noted that had persisted for a couple of hours. Network Traffic Analysis shows how these patterns are  affecting the system.
  
The proposed model classifies a given apk as malware or benign based on a dynamic analysis of the network traffic generated by it. There are three phases to this operation and are explained as follows: 

 Step 1 - Data Collection : 
          The first phase focuses on gathering benign and malware apps which are then installed into an emulator and is 
          launched manually. Then we use tcpdump to dump the raw traffic data into a pcap file.
 
 Step 2 - Feature Extraction and Labelling : 
          The second phase involves feature extraction where we open the pcap file in wireshark and calculate the feature 
          values used for our dataset and create a csv file consisting of the required features and a label indicating which 
          apps are malware. 
 
 Step 3 - Training and Testing : 
          In the last phase we feed the csv file into a machine learning model where a part of the data set is used to train 
          the model and the rest is for testing. 
￼
 
# WORKING
We start with capturing network traffic of malicious as well as benign (normal) apps. We used -
### Android Studio Emulator QEMU 
which acts as a dummy Android Phone where the benign as well as malware applications can be installed. We are using 
### QVGA 2.7’’ android device with Android Jelly Bean 4.1 version. 

![alt text](https://github.com/devu-62442/Android-Malware-Analysis/blob/master/images/Screenshot%202019-07-24%20at%2010.16.06%20AM.png)

From the dataset of Android malware samples we take one by one a malicious sample,install it on the phone through adb command 
### ( adb install Application-Name ) 

![alt text](https://github.com/devu-62442/Android-Malware-Analysis/blob/master/images/image-1.png)

and run the application on the android emulator then use the tcpdump command 
### ( tcpdump -w Application-Name ) 

![alt text](https://github.com/devu-62442/Android-Malware-Analysis/blob/master/images/Screenshot%202019-07-24%20at%2010.16.20%20AM.png)

to capture the application traffic. These all commands can run through the command line ( command prompt ). 

The data captured is now mined. Data mining is the process of extraction of relevant information from a collection of data. Mining of a particular information related to a concept is done on the basis of the feature of the data.
	
Next step is the feature selection step. Feature selection is critical to building a good model for several reasons. 
#### One is that feature selection implies some degree of cardinality reduction, to impose a cutoff on the number of attributes that can be considered when building a model. 
#### Data almost always contains more information than is needed to build the model, or the wrong kind of information. 
#### Not only does feature selection improve the quality of the model, it also makes the process of modeling more efficient. 



